import unittest
from math_interpreter.core.lexer import tokenize

class TestLexer(unittest.TestCase):
    def test_single_number(self):
        tokens = list(tokenize("42"))
        self.assertEqual(tokens, [('NUMBER', 42.0)])

    def test_multiple_tokens(self):
        tokens = list(tokenize("42 + 3.14 * pi"))
        expected = [
            ('NUMBER', 42.0),
            ('PLUS', '+'),
            ('NUMBER', 3.14),
            ('TIMES', '*'),
            ('PI', 'pi')
        ]
        self.assertEqual(tokens, expected)

    def test_functions_and_parentheses(self):
        tokens = list(tokenize("sin(3) + cos(2)"))
        expected = [
            ('SIN', 'sin'),
            ('LPAREN', '('),
            ('NUMBER', 3.0),
            ('RPAREN', ')'),
            ('PLUS', '+'),
            ('COS', 'cos'),
            ('LPAREN', '('),
            ('NUMBER', 2.0),
            ('RPAREN', ')')
        ]
        self.assertEqual(tokens, expected)

    def test_exponent_and_sqrt(self):
        tokens = list(tokenize("2^3 + sqrt(4)"))
        expected = [
            ('NUMBER', 2.0),
            ('EXPONENT', '^'),
            ('NUMBER', 3.0),
            ('PLUS', '+'),
            ('SQRT', 'sqrt'),
            ('LPAREN', '('),
            ('NUMBER', 4.0),
            ('RPAREN', ')')
        ]
        self.assertEqual(tokens, expected)

    def test_empty_string(self):
        tokens = list(tokenize(""))
        self.assertEqual(tokens, [])

if __name__ == '__main__':
    unittest.main()
